// Bootstrap 5.3.0 JavaScript Bundle - Simplified version
// This includes essential Bootstrap functionality for the AutoBlogger UI

(function() {
    'use strict';
    
    // Utility functions
    const getSelector = element => {
        let selector = element.getAttribute('data-bs-target');
        if (!selector || selector === '#') {
            selector = element.getAttribute('href') || '';
        }
        return selector;
    };
    
    const getElementFromSelector = element => {
        const selector = getSelector(element);
        return selector ? document.querySelector(selector) : null;
    };
    
    // Alert functionality
    class Alert {
        constructor(element) {
            this._element = element;
        }
        
        static getInstance(element) {
            return element._alert || null;
        }
        
        static getOrCreateInstance(element) {
            return this.getInstance(element) || new this(element);
        }
        
        close() {
            const closeEvent = new Event('close.bs.alert');
            this._element.dispatchEvent(closeEvent);
            
            if (closeEvent.defaultPrevented) {
                return;
            }
            
            this._removeElement();
        }
        
        _removeElement() {
            this._element.classList.remove('show');
            
            if (this._element.classList.contains('fade')) {
                this._element.classList.add('fade');
            }
            
            const parent = this._element.parentNode;
            if (parent) {
                parent.removeChild(this._element);
            }
        }
    }
    
    // Collapse functionality
    class Collapse {
        constructor(element) {
            this._element = element;
            this._isTransitioning = false;
        }
        
        static getInstance(element) {
            return element._collapse || null;
        }
        
        static getOrCreateInstance(element) {
            return this.getInstance(element) || new this(element);
        }
        
        toggle() {
            if (this._element.classList.contains('show')) {
                this.hide();
            } else {
                this.show();
            }
        }
        
        show() {
            if (this._isTransitioning || this._element.classList.contains('show')) {
                return;
            }
            
            this._isTransitioning = true;
            this._element.classList.add('show');
            
            setTimeout(() => {
                this._isTransitioning = false;
            }, 350);
        }
        
        hide() {
            if (this._isTransitioning || !this._element.classList.contains('show')) {
                return;
            }
            
            this._isTransitioning = true;
            this._element.classList.remove('show');
            
            setTimeout(() => {
                this._isTransitioning = false;
            }, 350);
        }
    }
    
    // Initialize components
    function initializeComponents() {
        // Initialize alerts
        document.querySelectorAll('.alert').forEach(alert => {
            alert._alert = new Alert(alert);
        });
        
        // Initialize collapse
        document.querySelectorAll('[data-bs-toggle="collapse"]').forEach(trigger => {
            const target = getElementFromSelector(trigger);
            if (target) {
                target._collapse = new Collapse(target);
                
                trigger.addEventListener('click', e => {
                    e.preventDefault();
                    target._collapse.toggle();
                });
            }
        });
        
        // Auto-dismiss alerts
        document.querySelectorAll('.alert[data-bs-autohide]').forEach(alert => {
            const delay = parseInt(alert.getAttribute('data-bs-autohide')) || 5000;
            setTimeout(() => {
                if (alert._alert) {
                    alert._alert.close();
                }
            }, delay);
        });
    }
    
    // Initialize on DOM ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeComponents);
    } else {
        initializeComponents();
    }
    
    // Export for global access
    window.bootstrap = {
        Alert,
        Collapse
    };
    
})();

